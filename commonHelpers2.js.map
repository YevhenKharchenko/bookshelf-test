{"version":3,"file":"commonHelpers2.js","sources":["../src/js/local-storage.js"],"sourcesContent":["import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nconst container = document.getElementById('tui-pagination-container');\nconst instance = new Pagination(container);\n\ninstance.getCurrentPage();\n\nconst shoppingList = document.querySelector('.shopping-list');\n\n// Створюємо масив для збереження книг у localStorage\nconst localStorageItems = JSON.parse(localStorage.getItem('books')) || [];\n\n// Рендер Shopping list без реквеста на сервер\nexport function renderShoppingListFromLocalStorage() {\n  try {\n    const localStorageItems = JSON.parse(localStorage.getItem('books')) || [];\n    if (!localStorageItems) return;\n    localStorageItems.forEach(book =>\n      renderBookFromLocalStorageWithoutFetch(book)\n    );\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n}\n\n// Рендер книги без реквеста на сервер\nexport function renderBookFromLocalStorageWithoutFetch(book) {\n  const markup = `\n  <li id=\"${book._id}\">\n    <img src=\"${book.book_image}\" alt=\"${book.title}\">\n    <h3>${book.title}</h3>\n    <p>${book.description}</p>\n    <p>${book.author}</p>\n    <p>${book.publisher}</p>\n    <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n    <button type=\"button\">Remove from shopping list</button>\n  </li>`;\n\n  shoppingList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Видалення елемента з Shopping List\nexport function onRemoveFromShoppingListAndLocalStorage(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  const element = e.target.parentNode;\n  const id = element.id;\n  const index = localStorageItems.findIndex(item => item._id === id);\n\n  if (index !== -1) {\n    localStorageItems.splice(index, 1);\n    localStorage.setItem('books', JSON.stringify(localStorageItems));\n  }\n\n  element.remove();\n}\n\nshoppingList.addEventListener('click', onRemoveFromShoppingListAndLocalStorage);\n\nrenderShoppingListFromLocalStorage();\n"],"names":["container","instance","Pagination","shoppingList","localStorageItems","renderShoppingListFromLocalStorage","book","renderBookFromLocalStorageWithoutFetch","error","markup","onRemoveFromShoppingListAndLocalStorage","e","element","id","index","item"],"mappings":"+IAGA,MAAMA,EAAY,SAAS,eAAe,0BAA0B,EAC9DC,EAAW,IAAIC,EAAWF,CAAS,EAEzCC,EAAS,eAAc,EAEvB,MAAME,EAAe,SAAS,cAAc,gBAAgB,EAGtDC,EAAoB,KAAK,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAK,GAGhE,SAASC,GAAqC,CACnD,GAAI,CACF,MAAMD,EAAoB,KAAK,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAK,GACvE,GAAI,CAACA,EAAmB,OACxBA,EAAkB,QAAQE,GACxBC,EAAuCD,CAAI,CACjD,CACG,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjB,SAAS,MAAM,CACb,MAAO,QACP,QAAS,+GAA+GA,EAAM,OAAO,GACrI,SAAU,UAChB,CAAK,CACF,CACH,CAGO,SAASD,EAAuCD,EAAM,CAC3D,MAAMG,EAAS;AAAA,YACLH,EAAK,GAAG;AAAA,gBACJA,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA,UACzCA,EAAK,KAAK;AAAA,SACXA,EAAK,WAAW;AAAA,SAChBA,EAAK,MAAM;AAAA,SACXA,EAAK,SAAS;AAAA,eACRA,EAAK,kBAAkB;AAAA;AAAA,SAIpCH,EAAa,mBAAmB,YAAaM,CAAM,CACrD,CAGO,SAASC,EAAwCC,EAAG,CACzD,GAAIA,EAAE,OAAO,WAAa,SAAU,OAEpC,MAAMC,EAAUD,EAAE,OAAO,WACnBE,EAAKD,EAAQ,GACbE,EAAQV,EAAkB,UAAUW,GAAQA,EAAK,MAAQF,CAAE,EAE7DC,IAAU,KACZV,EAAkB,OAAOU,EAAO,CAAC,EACjC,aAAa,QAAQ,QAAS,KAAK,UAAUV,CAAiB,CAAC,GAGjEQ,EAAQ,OAAM,CAChB,CAEAT,EAAa,iBAAiB,QAASO,CAAuC,EAE9EL,EAAoC"}