{"version":3,"file":"commonHelpers2.js","sources":["../src/js/local-storage.js"],"sourcesContent":["import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\n// Створюємо масив для збереження книг у localStorage\nconst localStorageItems = JSON.parse(localStorage.getItem('books')) || [];\n\nconst container = document.querySelector('.tui-pagination');\nconst shoppingList = document.querySelector('.shopping-list');\n\nconst pagination = new Pagination(container, {\n  totalItems: localStorageItems.length, // Set the total number of items\n  itemsPerPage: 3, // Set the number of items per page\n  visiblePages: 3, // Set the number of visible pages\n  page: 1, // Set the initial page\n  centerAlign: true,\n});\n\n// Handle page change event\npagination.on('afterMove', function (eventData) {\n  renderBooks(eventData.page); // Render books based on the current page\n});\n\nfunction renderBooks(page) {\n  shoppingList.innerHTML = ''; // Clear the shopping list\n  const startIndex = (page - 1) * pagination._options.itemsPerPage;\n  const endIndex = startIndex + pagination._options.itemsPerPage;\n  const booksToRender = localStorageItems.slice(startIndex, endIndex);\n\n  booksToRender.forEach(book => {\n    renderBookFromLocalStorageWithoutFetch(book);\n  });\n}\n\n// Рендер Shopping list без реквеста на сервер\nexport function renderShoppingListFromLocalStorage() {\n  try {\n    const localStorageItems = JSON.parse(localStorage.getItem('books')) || [];\n    if (!localStorageItems) return;\n    localStorageItems.forEach(book =>\n      renderBookFromLocalStorageWithoutFetch(book)\n    );\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n}\n\n// Рендер книги без реквеста на сервер\nexport function renderBookFromLocalStorageWithoutFetch(book) {\n  const markup = `\n  <li id=\"${book._id}\">\n    <img src=\"${book.book_image}\" alt=\"${book.title}\">\n    <h3>${book.title}</h3>\n    <p>${book.description}</p>\n    <p>${book.author}</p>\n    <p>${book.publisher}</p>\n    <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n    <button type=\"button\">Remove from shopping list</button>\n  </li>`;\n\n  shoppingList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Видалення елемента з Shopping List\nexport function onRemoveFromShoppingListAndLocalStorage(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  const element = e.target.parentNode;\n  const id = element.id;\n  const index = localStorageItems.findIndex(item => item._id === id);\n\n  if (index !== -1) {\n    localStorageItems.splice(index, 1);\n    localStorage.setItem('books', JSON.stringify(localStorageItems));\n    pagination.reset(localStorageItems.length); // Reset pagination with updated total items\n    renderBooks(pagination.getCurrentPage()); // Render books for the current page\n  }\n\n  element.remove();\n}\n\nshoppingList.addEventListener('click', onRemoveFromShoppingListAndLocalStorage);\n\n// Initial rendering\nrenderBooks(1); // Render books for the first page\n"],"names":["localStorageItems","container","shoppingList","pagination","Pagination","eventData","renderBooks","page","startIndex","endIndex","book","renderBookFromLocalStorageWithoutFetch","markup","onRemoveFromShoppingListAndLocalStorage","element","id","index","item"],"mappings":"oGAIA,MAAMA,EAAoB,KAAK,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAK,GAEjEC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAa,IAAIC,EAAWH,EAAW,CAC3C,WAAYD,EAAkB,OAC9B,aAAc,EACd,aAAc,EACd,KAAM,EACN,YAAa,EACf,CAAC,EAGDG,EAAW,GAAG,YAAa,SAAUE,EAAW,CAC9CC,EAAYD,EAAU,IAAI,CAC5B,CAAC,EAED,SAASC,EAAYC,EAAM,CACzBL,EAAa,UAAY,GACzB,MAAMM,GAAcD,EAAO,GAAKJ,EAAW,SAAS,aAC9CM,EAAWD,EAAaL,EAAW,SAAS,aAC5BH,EAAkB,MAAMQ,EAAYC,CAAQ,EAEpD,QAAQC,GAAQ,CAC5BC,EAAuCD,CAAI,CAC/C,CAAG,CACH,CAqBO,SAASC,EAAuCD,EAAM,CAC3D,MAAME,EAAS;AAAA,YACLF,EAAK,GAAG;AAAA,gBACJA,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA,UACzCA,EAAK,KAAK;AAAA,SACXA,EAAK,WAAW;AAAA,SAChBA,EAAK,MAAM;AAAA,SACXA,EAAK,SAAS;AAAA,eACRA,EAAK,kBAAkB;AAAA;AAAA,SAIpCR,EAAa,mBAAmB,YAAaU,CAAM,CACrD,CAGO,SAASC,EAAwC,EAAG,CACzD,GAAI,EAAE,OAAO,WAAa,SAAU,OAEpC,MAAMC,EAAU,EAAE,OAAO,WACnBC,EAAKD,EAAQ,GACbE,EAAQhB,EAAkB,UAAUiB,GAAQA,EAAK,MAAQF,CAAE,EAE7DC,IAAU,KACZhB,EAAkB,OAAOgB,EAAO,CAAC,EACjC,aAAa,QAAQ,QAAS,KAAK,UAAUhB,CAAiB,CAAC,EAC/DG,EAAW,MAAMH,EAAkB,MAAM,EACzCM,EAAYH,EAAW,eAAc,CAAE,GAGzCW,EAAQ,OAAM,CAChB,CAEAZ,EAAa,iBAAiB,QAASW,CAAuC,EAG9EP,EAAY,CAAC"}