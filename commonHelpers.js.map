{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport class BooksApi {\n  constructor() {\n    this.BASE_URL = 'https://books-backend.p.goit.global/books';\n    this.CATEGORY_LIST = '/category-list';\n    this.TOP_BOOKS = '/top-books';\n    this.CATEGORY = '/category?category=';\n  }\n\n  async getCategories() {\n    const url = this.BASE_URL + this.CATEGORY_LIST;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n\n  async getTopBooks() {\n    const url = this.BASE_URL + this.TOP_BOOKS;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n\n  async getCategory(category) {\n    const url = this.BASE_URL + this.CATEGORY + category;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n\n  async getBook(id) {\n    const url = this.BASE_URL + '/' + id;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n}\n","import { BooksApi } from './js/books-api';\n\nconst booksApi = new BooksApi();\n\nconst categoriesList = document.querySelector('.categories-list');\nconst categoryItem = document.querySelector('.category');\nconst shoppingList = document.querySelector('.shopping-list');\n\nconst localStorageItems = JSON.parse(localStorage.getItem('books')) || [];\n\nexport async function renderBooksList() {\n  const categories = await booksApi.getCategories();\n  const markup = categories\n    .map(\n      ({ list_name }) =>\n        `<a class=\"category-link\" href=\"\"><li>${list_name}</li></a>`\n    )\n    .join('');\n\n  categoriesList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport async function renderTopBooks() {\n  const topBooks = await booksApi.getTopBooks();\n\n  topBooks.forEach(list => {\n    const listHeaderHTML = `<h2>${list.list_name}</h2>`;\n    const showCategoryBtnHTML = `<button class=\"category-btn\" data-category=\"${list.list_name}\" type=\"button\">See more</button>`;\n\n    const markup = list.books\n      .map(book => {\n        return `\n        <div class=\"book\" id=\"${book._id}\">\n          <img src=\"${book.book_image}\" alt=\"${book.title}\">\n          <h3>${book.title}</h3>\n          <p>Author: ${book.author}</p>\n          <p>Publisher: ${book.publisher}</p>\n          <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n        </div>`;\n      })\n      .join('');\n\n    const listOfTopBooks = listHeaderHTML + showCategoryBtnHTML + markup;\n\n    categoryItem.insertAdjacentHTML('beforeend', listOfTopBooks);\n  });\n}\n\nexport async function renderCategory(category) {\n  const booksList = await booksApi.getCategory(category);\n\n  const categoryHeaderHTML = `<h2>${category}</h2>`;\n  const markup = booksList\n    .map(book => {\n      return `\n      <div class=\"book\" id=\"${book._id}\">\n        <img src=\"${book.book_image}\" alt=\"${book.title}\">\n        <h3>${book.title}</h3>\n        <p>Author: ${book.author}</p>\n        <p>Publisher: ${book.publisher}</p>\n        <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n      </div>`;\n    })\n    .join('');\n\n  const listOfCategoryBooks = categoryHeaderHTML + markup;\n\n  categoryItem.insertAdjacentHTML('beforeend', listOfCategoryBooks);\n}\n\nexport async function renderBook(id) {\n  const book = await booksApi.getBook(id);\n\n  const markup = `\n  <li id=\"${book._id}\">\n    <img src=\"${book.book_image}\" alt=\"${book.title}\">\n    <h3>${book.title}</h3>\n    <p>Author: ${book.author}</p>\n    <p>Publisher: ${book.publisher}</p>\n    <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n    <button type=\"button\">Add to shopping list</button>\n  </li>`;\n\n  categoryItem.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function onGalleryItemClick(e) {\n  e.preventDefault();\n  categoryItem.innerHTML = '';\n  const category = e.target.textContent;\n  renderCategory(category);\n}\n\nexport function onShowCategoryBtnClick(e) {\n  if (!e.target.classList.contains('category-btn')) return;\n  const category = e.target.dataset.category;\n  categoryItem.innerHTML = '';\n  renderCategory(category);\n}\n\nexport function openModal(e) {\n  if (e.target.nodeName !== 'IMG') return;\n  e.preventDefault();\n  e.stopPropagation();\n  const id = e.target.parentNode.id;\n  categoryItem.innerHTML = '';\n  renderBook(id);\n}\n\nexport function onAddToShoppingListBtn(e) {\n  if (e.target.textContent !== 'Add to shopping list') return;\n  const id = e.target.parentNode.id;\n  if (localStorageItems.includes(id)) return;\n  localStorageItems.push(id);\n  localStorage.setItem('books', JSON.stringify(localStorageItems));\n}\n\nexport function renderShoppingList() {\n  const arrayOfBooks = JSON.parse(localStorage.getItem('books'));\n  if (!arrayOfBooks) return;\n  arrayOfBooks.forEach(book => renderBookFromLocalStorage(book));\n}\n\nexport async function renderBookFromLocalStorage(id) {\n  const book = await booksApi.getBook(id);\n\n  const markup = `\n  <li id=\"${book._id}\">\n    <img src=\"${book.book_image}\" alt=\"${book.title}\">\n    <h3>${book.title}</h3>\n    <p>Author: ${book.author}</p>\n    <p>Publisher: ${book.publisher}</p>\n    <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n    <button type=\"button\">Remove from shopping list</button>\n  </li>`;\n\n  shoppingList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function onRemoveFromShoppingList(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n  const element = e.target.parentNode;\n  const id = element.id;\n  localStorageItems.splice(id, 1);\n  localStorage.setItem('books', JSON.stringify(localStorageItems));\n  element.remove();\n}\n\n// export function onRemoveFromShoppingListFromModal(e) {\n//   if (e.target.textContent !== 'Remove from shopping list') return;\n\n//   const element = e.target.parentNode;\n//   const id = element.id;\n\n//   localStorageItems.splice(id, 1);\n//   localStorage.setItem('books', JSON.stringify(localStorageItems));\n// }\n\ncategoriesList.addEventListener('click', onGalleryItemClick);\ncategoryItem.addEventListener('click', onShowCategoryBtnClick);\ncategoryItem.addEventListener('click', openModal);\ncategoryItem.addEventListener('click', onAddToShoppingListBtn);\nshoppingList.addEventListener('click', onRemoveFromShoppingList);\n// categoryItem.addEventListener('click', onRemoveFromShoppingListFromModal);\n\nrenderBooksList();\nrenderTopBooks();\nrenderShoppingList();\n"],"names":["BooksApi","url","axios","category","id","booksApi","categoriesList","categoryItem","shoppingList","localStorageItems","renderBooksList","markup","list_name","renderTopBooks","list","listHeaderHTML","showCategoryBtnHTML","book","listOfTopBooks","renderCategory","booksList","categoryHeaderHTML","listOfCategoryBooks","renderBook","onGalleryItemClick","onShowCategoryBtnClick","openModal","onAddToShoppingListBtn","renderShoppingList","arrayOfBooks","renderBookFromLocalStorage","onRemoveFromShoppingList","element"],"mappings":"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"}