{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport class BooksApi {\n  constructor() {\n    this.BASE_URL = 'https://books-backend.p.goit.global/books';\n    this.CATEGORY_LIST = '/category-list';\n    this.TOP_BOOKS = '/top-books';\n    this.CATEGORY = '/category?category=';\n  }\n\n  async getCategories() {\n    const url = this.BASE_URL + this.CATEGORY_LIST;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n\n  async getTopBooks() {\n    const url = this.BASE_URL + this.TOP_BOOKS;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n\n  async getCategory(category) {\n    const url = this.BASE_URL + this.CATEGORY + category;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n\n  async getBook(id) {\n    const url = this.BASE_URL + '/' + id;\n    const response = await axios.get(url);\n\n    return response.data;\n  }\n}\n","import { BooksApi } from './js/books-api';\n\nconst booksApi = new BooksApi();\n\nconst categoriesList = document.querySelector('.categories-list');\nconst categoryItem = document.querySelector('.category');\nconst bookItem = document.querySelector('.book-item');\n\nexport async function renderBooksList() {\n  const categories = await booksApi.getCategories();\n  const markup = categories\n    .map(\n      ({ list_name }) =>\n        `<a class=\"category-link\" href=\"\"><li>${list_name}</li></a>`\n    )\n    .join('');\n\n  categoriesList.insertAdjacentHTML('beforeend', markup);\n\n  const arrOfCategories = document.querySelectorAll('.category-link');\n\n  arrOfCategories.forEach(category =>\n    category.addEventListener('click', e => {\n      e.preventDefault();\n      categoryItem.innerHTML = '';\n      renderCategory(category.textContent);\n    })\n  );\n}\n\nexport async function renderTopBooks() {\n  const topBooks = await booksApi.getTopBooks();\n\n  topBooks.forEach(list => {\n    const listHeaderHTML = `<h2>${list.list_name}</h2>`;\n    const showCategoryBtnHTML = `<button class=\"category-btn\" data-category=\"${list.list_name}\" type=\"button\">See more</button>`;\n\n    const booksHTML = list.books\n      .map(book => {\n        return `\n        <div class=\"book\" id=\"${book._id}\">\n            <img src=\"${book.book_image}\" alt=\"${book.title}\">\n            <h3>${book.title}</h3>\n            <p>Author: ${book.author}</p>\n            <p>Publisher: ${book.publisher}</p>\n            <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n        </div>`;\n      })\n      .join('');\n\n    const listOfTopBooks = listHeaderHTML + showCategoryBtnHTML + booksHTML;\n    categoryItem.insertAdjacentHTML('beforeend', listOfTopBooks);\n\n    // const categoryButtons = categoryItem.querySelectorAll('.category-btn');\n    // categoryButtons.forEach(el =>\n    //   el.addEventListener('click', onShowCategoryBtnClick)\n    // );\n  });\n\n  categoryItem.addEventListener('click', onShowCategoryBtnClick);\n}\n\nexport async function renderCategory(category) {\n  const booksList = await booksApi.getCategory(category);\n  const markup = booksList\n    .map(book => {\n      return `<div class=\"book\" id=\"${book._id}\">\n            <img src=\"${book.book_image}\" alt=\"${book.title}\">\n            <h3>${book.title}</h3>\n            <p>Author: ${book.author}</p>\n            <p>Publisher: ${book.publisher}</p>\n            <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>\n        </div>`;\n    })\n    .join('');\n\n  categoryItem.insertAdjacentHTML('beforeend', markup);\n}\n\nexport async function renderBook(id) {\n  const book = await booksApi.getBook(id);\n\n  const markup = `<img src=\"${book.book_image}\" alt=\"${book.title}\">\n                  <h3>${book.title}</h3>\n                  <p>Author: ${book.author}</p>\n                  <p>Publisher: ${book.publisher}</p>\n                  <a href=\"${book.amazon_product_url}\" target=\"_blank\">Buy on Amazon</a>`;\n\n  categoryItem.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onShowCategoryBtnClick(e) {\n  if (!e.target.classList.contains('category-btn')) return;\n  const category = e.target.dataset.category;\n  categoryItem.innerHTML = '';\n  renderCategory(category);\n}\n\nfunction onImgLinkClick(e) {\n  if (e.target.nodeName != 'IMG') return;\n  e.preventDefault();\n  const id = e.target.parentNode.id;\n  categoryItem.innerHTML = '';\n  renderBook(id);\n}\n\ncategoryItem.addEventListener('click', onImgLinkClick);\n\nrenderBooksList();\nrenderTopBooks();\n"],"names":["BooksApi","url","axios","category","id","booksApi","categoriesList","categoryItem","renderBooksList","markup","list_name","e","renderCategory","renderTopBooks","list","listHeaderHTML","showCategoryBtnHTML","booksHTML","book","listOfTopBooks","onShowCategoryBtnClick","renderBook","onImgLinkClick"],"mappings":"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"}