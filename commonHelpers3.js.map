{"version":3,"file":"commonHelpers3.js","sources":["../src/js/shopping-list.js"],"sourcesContent":["// import axios from 'https://cdn.skypack.dev/axios';\n// import { BooksApi } from './books-api.js';\n\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\n// const booksApi = new BooksApi();\n\n// const booksToFetch = [\"643282b1e85766588626a0dc\", \"643282b1e85766588626a080\", \"643282b1e85766588626a0b2\", '643282b1e85766588626a086', '643282b1e85766588626a085'];\n\n// localStorage.setItem('books', JSON.stringify(booksToFetch));\n\n// const shoppingList = document.querySelector('.shopping-list');\n\n// function renderShoppingList() {\n//   try {\n//     const arrayOfBooks = JSON.parse(localStorage.getItem('books'));\n//     if (!arrayOfBooks) return;\n//     arrayOfBooks.forEach(book => renderBookFromLocalStorage(book));\n//   } catch (error) {\n//     console.log(error);\n//     iziToast.error({\n//       title: 'Error',\n//       message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n//       position: 'topRight',\n//     });\n//   }\n\n// }\n// async function renderBookFromLocalStorage(id) {\n//   try {\n//     const book = await booksApi.getBook(id);\n\n//     const markup = `<li class=\"shopping-list-item\"> <div class=\"shopping-list-div-image\"> <img class=\"shopping-list-image\" src=\"${book.book_image}\" alt=\"\"> </div> <div class=\"shopping-list-text\"> <div shopping-list-div-descr> <h2 class=\"shopping-list-item-header\">${book.title}</h2> <p class=\"shopping-list-item-category\">${book.list_name}</p> <p class=\"shopping-list-item-description\">${book.description}</p> </div> <div class=\"shopping-list-div-buy\"> <p class=\"shopping-list-item-author\">${book.author}</p> </div> </div> </li>`;\n\n//     shoppingList.insertAdjacentHTML('beforeend', markup);\n//   } catch (error) {\n//     console.log(error);\n//     iziToast.error({\n//       title: 'Error',\n//       message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n//       position: 'topRight',\n//     });\n//   }\n// }\n\n// export function onRemoveFromShoppingList(e) {\n//   if (e.target.nodeName !== 'BUTTON') return;\n//   const element = e.target.parentNode;\n//   const id = element.id;\n//   const index = localStorageItems.indexOf(id);\n//   localStorageItems.splice(index, 1);\n//   localStorage.setItem('books', JSON.stringify(localStorageItems));\n//   element.remove();\n// }\n\n// renderShoppingList();\n\n// ======================================================= Load to local storage =======================================\n\nimport axios from 'https://cdn.skypack.dev/axios';\n\nasync function getBooksAndAddToLocalStorage(array) {\n  const localStorageArray = [];\n\n  try {\n    // Use Promise.all to await all Axios requests concurrently\n    await Promise.all(\n      array.map(async id => {\n        const url = `https://books-backend.p.goit.global/books/${id}`;\n        const response = await axios.get(url);\n        localStorageArray.push(response.data); // Push entire book object to the array\n      })\n    );\n\n    // Convert the array to a string before storing it in local storage\n    localStorage.setItem('booksArray', JSON.stringify(localStorageArray));\n  } catch (error) {\n    console.error('Error fetching books:', error);\n  }\n}\n\nconst booksToFetch = [\n  '643282b1e85766588626a0dc',\n  '643282b1e85766588626a080',\n  '643282b1e85766588626a0b2',\n  '643282b1e85766588626a086',\n  '643282b1e85766588626a085',\n];\n\ngetBooksAndAddToLocalStorage(booksToFetch);\n\n// ===================== Get from local storage ========================================================================\n\nconst shoppingList = document.querySelector('.shopping-list');\n\nfunction getBooksFromLocalStorage(key) {\n  const getData = localStorage.getItem(key);\n  try {\n    const arrayToRender = JSON.parse(getData);\n    console.log(arrayToRender);\n    arrayToRender.forEach(book => {\n      const markup = `<li class=\"shopping-list-item\" data-id=\"${book._id}\">\n\n        <button type=\"button\" class=\"delete-btn\" title=\"Delete\"> \n        <svg class=\"delete-btn-icon\" width=\"16\" height=\"16\"> <use href=\"/svg-sprite.svg#icon-trash\"></use> </svg> </button> \n\n        <div class=\"shopping-list-div-image\"> <img class=\"shopping-list-image\" src=\"${book.book_image}\" alt=\"${book.title}\"> </div> \n\n        <div class=\"shopping-list-text\"> <h2 class=\"shopping-list-item-header\">${book.title}</h2>\n        \n        <p class=\"shopping-list-item-category\">${book.list_name}</p> \n        <div class=\"description-wrapper\"><p class=\"shopping-list-item-description\">${book.description}</p></div>\n        \n        <div class=\"link-container\"> \n        <p class=\"shopping-list-item-author\">${book.author}</p>\n        <div class=\"\"link-wrapper>\n            <a class=\"amazon-icon\" href=\"${book.amazon_product_url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">am</a>\n            <a class=\"apple-icon\" href=\"${book.buy_links[1].url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">ap</a>\n        </div>\n        </div>\n        </div>\n        </li>`;\n\n      shoppingList.insertAdjacentHTML('beforeend', markup);\n    });\n  } catch {\n    return getData;\n  }\n}\n\ngetBooksFromLocalStorage('booksArray');\n"],"names":["getBooksAndAddToLocalStorage","array","localStorageArray","id","url","response","axios","error","booksToFetch","shoppingList","getBooksFromLocalStorage","key","getData","arrayToRender","book","markup"],"mappings":"iGA8DA,eAAeA,EAA6BC,EAAO,CACjD,MAAMC,EAAoB,CAAA,EAE1B,GAAI,CAEF,MAAM,QAAQ,IACZD,EAAM,IAAI,MAAME,GAAM,CACpB,MAAMC,EAAM,6CAA6CD,CAAE,GACrDE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpCF,EAAkB,KAAKG,EAAS,IAAI,CAC5C,CAAO,CACP,EAGI,aAAa,QAAQ,aAAc,KAAK,UAAUH,CAAiB,CAAC,CACrE,OAAQK,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC7C,CACH,CAEA,MAAMC,EAAe,CACnB,2BACA,2BACA,2BACA,2BACA,0BACF,EAEAR,EAA6BQ,CAAY,EAIzC,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,SAASC,EAAyBC,EAAK,CACrC,MAAMC,EAAU,aAAa,QAAQD,CAAG,EACxC,GAAI,CACF,MAAME,EAAgB,KAAK,MAAMD,CAAO,EACxC,QAAQ,IAAIC,CAAa,EACzBA,EAAc,QAAQC,GAAQ,CAC5B,MAAMC,EAAS,2CAA2CD,EAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,sFAKcA,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA;AAAA,iFAExCA,EAAK,KAAK;AAAA;AAAA,iDAE1CA,EAAK,SAAS;AAAA,qFACsBA,EAAK,WAAW;AAAA;AAAA;AAAA,+CAGtDA,EAAK,MAAM;AAAA;AAAA,2CAEfA,EAAK,kBAAkB;AAAA,0CACxBA,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA;AAAA;AAAA;AAAA,eAMzDL,EAAa,mBAAmB,YAAaM,CAAM,CACzD,CAAK,CACL,MAAU,CACN,OAAOH,CACR,CACH,CAEAF,EAAyB,YAAY"}